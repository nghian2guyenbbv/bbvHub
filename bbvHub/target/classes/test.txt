DECLARE @user_setting int
DECLARE @user_id int
DECLARE @admin_group_id int
DECLARE @hella_gutmann_collection int
SET @hella_gutmann_collection = (select ID from ORGANISATION_COLLECTION where SHORTNAME = 'hgs-at')
DECLARE @hella_gutmann_org int
SET @hella_gutmann_org = (select ID from ORGANISATION where SHORTNAME = 'hgs-at')
DECLARE @org_type int
SET @org_type = (select ID from ORGANISATION_TYPE where NAME = 'CUSTOMER')
DECLARE @admin_role int
SET @admin_role = (select ID from ESHOP_ROLE where NAME = 'USER_ADMIN')
DECLARE @normal_role int
SET @normal_role = (select ID from ESHOP_ROLE where NAME  = 'NORMAL_USER')
DECLARE @cust_setting int
DECLARE @org_id int
DECLARE @address_id int
DECLARE @normal_group_id int
-------customer 99000118---------
IF (SELECT COUNT(ID)  from ORGANISATION WHERE ORG_CODE = '99000118') = 0

    INSERT INTO CUSTOMER_SETTINGS(ALLOCATION_ID, PAYMENT_METHOD, DELIVERY_ID, COLLECTIVE_DELIVERY_ID, NET_PRICE_VIEW, NET_PRICE_CONFIRM, VIEW_BILLING, ADDRESS_ID, USE_DEFAULT_SETTING, EMAIL_NOTIFICATION_ORDER, BILLING_ADDRESS_ID, DELIVERY_ADDRESS_ID, ALLOW_NET_PRICE_CHANGED, INVOICE_TYPE, SHOW_DISCOUNT, SESSION_TIMEOUT_SECONDS, SHOW_OCI_VAT, HOME_BRANCH, DEMO_CUSTOMER, PRICE_DISPLAY_ID, NORMAUTO_DISPLAY, HAS_PARTNER_PROGRAM_VIEW, WSS_SHOW_NET_PRICE, WSS_MARGIN_GROUP, WSS_DELIVERY_PROFILE_ID, WSS_DELIVERY_ID)VALUES(1, 2, 2, 1, 1, 1, 0, 0, 0, 0, N'1', N'1', 1, 2, 0, 14400, 0, NULL, 0, 1, 0, 0, 0, NULL, NULL, 1)SET @cust_setting = @@IDENTITY;
INSERT INTO ORGANISATION
(NAME, ORG_CODE, ORGTYPE_ID, PARENT_ID, DESCRIPTION, SHORTNAME, ORDER_SETTINGS_ID)
VALUES(N'', N'99000118', @org_type, @hella_gutmann_org, N'', N'customer-99000118', @cust_setting)
SET @org_id = @@IDENTITY;
INSERT INTO COLLECTION_RELATION
(COLLECTION_ID, ORGANISATION_ID, IS_ACTIVE)
VALUES(@hella_gutmann_collection, @org_id, 1)
INSERT INTO ADDRESS
(LINE1, LINE2, LINE3, COUNTRYISO, STATE, CITY, ZIPCODE, ADDRESS_TYPE_ID)
VALUES(N'Salzburger Str. 46', NULL, NULL, N'', NULL, N'Mattsee', N'5163', 1)
INSERT INTO ORGANISATION_ADDRESS
(ORGANISATION_ID, ADDRESS_ID)
VALUES(@org_id, @address_id)
INSERT INTO ESHOP_GROUP
(NAME, DESCRIPTION)
VALUES(N'CUSTOMER_99000118_USER_ADMIN', N'User admin group of ')
SET @admin_group_id = @@IDENTITY;
INSERT INTO GROUP_ROLE
(GROUP_ID, ROLE_ID)
VALUES(@admin_group_id, @admin_role)

INSERT INTO ORGANISATION_GROUP
(GROUP_ID, ORGANISATION_ID)
VALUES(@admin_group_id, @org_id)
IF (SELECT COUNT(ID)  from ESHOP_USER WHERE USERNAME = N'Agent-99000118') = 0

    INSERT INTO USER_SETTINGS
(ALLOCATION_ID, PAYMENT_METHOD, DELIVERY_ID, COLLECTIVE_DELIVERY_ID, NET_PRICE_VIEW, NET_PRICE_CONFIRM, VIEW_BILLING, ADDRESS_ID, USE_DEFAULT_SETTING, EMAIL_NOTIFICATION_ORDER, BILLING_ADDRESS_ID, DELIVERY_ADDRESS_ID, INVOICE_TYPE, SHOW_DISCOUNT, SHOW_HAPPY_POINTS, ACCEPT_HAPPY_POINT_TERM, SALE_ON_BEHALF_OF, SHOW_RECOMMENDED_RETAIL_PRICE, CURRENT_STATE_NET_PRICE_VIEW, CLASSIC_CATEGORY_VIEW, SINGLE_SELECT_MODE)VALUES(1, 2, 2, 1, 1, 1, 0, 0, 1, 0, N'1', N'1', 2, 0, 0, 0, 1, 0, 1, 0, 0)
SET @user_setting = @@IDENTITY;
INSERT INTO ESHOP_USER
(SALUTATION, FIRST_NAME, LAST_NAME, EMAIL, USERNAME, PHONE, [LANGUAGE], [TYPE], HOURLY_RATE, EMAIL_CONFIRMATION, NEWSLETTER, SETTING, VAT_CONFIRM, SIGN_IN_DATE, FAX, ORIGINAL_USER_ID)
VALUES(9, N'99000118', N'Agent', N'noReply@sag-austria.at', N'Agent-99000118', N' ', 1, N'ON_BEHALF_ADMIN', NULL, 0, 0, @user_setting, 1, NULL, NULL, NULL)
SET @user_id = @@IDENTITY;
SET @admin_group_id = (SELECT ID FROM ESHOP_GROUP
WHERE NAME ='CUSTOMER_99000118_USER_ADMIN')
INSERT INTO GROUP_USER
(GROUP_ID, USER_ID)
VALUES(@admin_group_id, @user_id)

IF (SELECT COUNT(ID)  from V_ACTIVE_USER WHERE USERNAME = N'99000118' AND AFFILIATE='Hella-Austria') = 0

INSERT INTO USER_SETTINGS
(ALLOCATION_ID, PAYMENT_METHOD, DELIVERY_ID, COLLECTIVE_DELIVERY_ID, NET_PRICE_VIEW, NET_PRICE_CONFIRM, VIEW_BILLING, ADDRESS_ID, USE_DEFAULT_SETTING, EMAIL_NOTIFICATION_ORDER, BILLING_ADDRESS_ID, DELIVERY_ADDRESS_ID,  INVOICE_TYPE, SHOW_DISCOUNT, SHOW_HAPPY_POINTS, ACCEPT_HAPPY_POINT_TERM, SALE_ON_BEHALF_OF, SHOW_RECOMMENDED_RETAIL_PRICE, CURRENT_STATE_NET_PRICE_VIEW, CLASSIC_CATEGORY_VIEW, SINGLE_SELECT_MODE)VALUES(1, 2, 2, 1, 1, 1, 0, 0, 1, 0, N'1', N'1', 2, 0, 0, 0, 1, 0, 1, 0, 0)
SET @user_setting = @@IDENTITY;
INSERT INTO ESHOP_USER
(SALUTATION, FIRST_NAME, LAST_NAME, EMAIL, USERNAME, PHONE, [LANGUAGE], [TYPE], HOURLY_RATE, EMAIL_CONFIRMATION, NEWSLETTER, SETTING, VAT_CONFIRM, SIGN_IN_DATE, FAX, ORIGINAL_USER_ID)
VALUES(9, N'99000118', N'Auto Strasser Rupert ', N'', N'cust-99000118', null, 1, NULL, 0, 0, 0, @user_setting, 1, NULL, NULL, NULL)
SET @admin_group_id = (SELECT ID FROM ESHOP_GROUP
WHERE NAME='CUSTOMER_99000118_USER_ADMIN')

INSERT INTO GROUP_USER
(GROUP_ID, USER_ID)
VALUES(@admin_group_id, @user_id)


ROLLBACK;